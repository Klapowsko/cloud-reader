.PHONY: help install dev build start lint clean test

# Vari√°veis
NODE_MODULES := node_modules
PORT := 3000

# Comando padr√£o
.DEFAULT_GOAL := help

## help: Mostra esta mensagem de ajuda
help:
	@echo "Comandos dispon√≠veis:"
	@echo ""
	@echo "  make install    - Instala as depend√™ncias do projeto"
	@echo "  make dev        - Inicia o servidor de desenvolvimento (porta $(PORT))"
	@echo "  make build      - Faz o build do projeto para produ√ß√£o"
	@echo "  make start      - Inicia o servidor em modo produ√ß√£o"
	@echo "  make lint       - Executa o linter do projeto"
	@echo "  make clean      - Remove node_modules e arquivos gerados"
	@echo "  make test       - Executa os testes (quando dispon√≠vel)"
	@echo ""

## install: Instala as depend√™ncias do projeto
install:
	@echo "üì¶ Instalando depend√™ncias..."
	npm install

## dev: Inicia o servidor de desenvolvimento
dev:
	@echo "üöÄ Iniciando servidor de desenvolvimento na porta $(PORT)..."
	npm run dev

## build: Faz o build do projeto para produ√ß√£o
build:
	@echo "üî® Fazendo build do projeto..."
	npm run build

## start: Inicia o servidor em modo produ√ß√£o (requer build pr√©vio)
start:
	@echo "üéØ Iniciando servidor em modo produ√ß√£o..."
	npm run start

## lint: Executa o linter do projeto
lint:
	@echo "üîç Executando linter..."
	npm run lint

## clean: Remove node_modules e arquivos gerados
clean:
	@echo "üßπ Limpando arquivos gerados..."
	rm -rf $(NODE_MODULES)
	rm -rf .next
	rm -rf out
	rm -f package-lock.json
	@echo "‚úÖ Limpeza conclu√≠da!"

## test: Executa os testes (quando dispon√≠vel)
test:
	@echo "üß™ Executando testes..."
	@if npm run test 2>/dev/null; then \
		npm run test; \
	else \
		echo "‚ö†Ô∏è  Nenhum script de teste configurado"; \
	fi

